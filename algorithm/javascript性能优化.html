<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>javascript 性能优化 | 张晓伟-技术文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/images/photo.jpg">
    <link rel="manifest" href="/images/photo.jpg">
    <link rel="apple-touch-icon" href="/images/photo.jpg">
    <meta name="description" content="Personal Website">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
    <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.f46d1901.css" as="style"><link rel="preload" href="/assets/js/app.ac5ad06d.js" as="script"><link rel="preload" href="/assets/js/3.c24abbc0.js" as="script"><link rel="preload" href="/assets/js/71.26b88a69.js" as="script"><link rel="prefetch" href="/assets/js/10.4fec8d03.js"><link rel="prefetch" href="/assets/js/100.992dc290.js"><link rel="prefetch" href="/assets/js/101.44509c85.js"><link rel="prefetch" href="/assets/js/102.956b0216.js"><link rel="prefetch" href="/assets/js/103.0083806d.js"><link rel="prefetch" href="/assets/js/104.d3d9a461.js"><link rel="prefetch" href="/assets/js/105.ee725b55.js"><link rel="prefetch" href="/assets/js/106.e0794f99.js"><link rel="prefetch" href="/assets/js/107.30abcf83.js"><link rel="prefetch" href="/assets/js/108.a7ebdef7.js"><link rel="prefetch" href="/assets/js/109.e61fb0a2.js"><link rel="prefetch" href="/assets/js/11.3fa19d12.js"><link rel="prefetch" href="/assets/js/110.1bdc75a2.js"><link rel="prefetch" href="/assets/js/111.ace68420.js"><link rel="prefetch" href="/assets/js/112.e50d891e.js"><link rel="prefetch" href="/assets/js/113.834ab4ca.js"><link rel="prefetch" href="/assets/js/114.1b3f5e5d.js"><link rel="prefetch" href="/assets/js/115.207013e4.js"><link rel="prefetch" href="/assets/js/116.15c76d7b.js"><link rel="prefetch" href="/assets/js/117.fb69ce83.js"><link rel="prefetch" href="/assets/js/118.f390ddaf.js"><link rel="prefetch" href="/assets/js/119.f88e1d30.js"><link rel="prefetch" href="/assets/js/12.ebaa0477.js"><link rel="prefetch" href="/assets/js/120.5d59a0e1.js"><link rel="prefetch" href="/assets/js/121.bf67b374.js"><link rel="prefetch" href="/assets/js/122.c73bc3e6.js"><link rel="prefetch" href="/assets/js/123.36e363e4.js"><link rel="prefetch" href="/assets/js/124.10c7815d.js"><link rel="prefetch" href="/assets/js/125.6bfdaa7f.js"><link rel="prefetch" href="/assets/js/126.b105ace1.js"><link rel="prefetch" href="/assets/js/127.603f4797.js"><link rel="prefetch" href="/assets/js/128.84b95f8e.js"><link rel="prefetch" href="/assets/js/129.e89f5af8.js"><link rel="prefetch" href="/assets/js/13.7502b3ed.js"><link rel="prefetch" href="/assets/js/130.7dbbdac1.js"><link rel="prefetch" href="/assets/js/131.24141011.js"><link rel="prefetch" href="/assets/js/132.9e3b6479.js"><link rel="prefetch" href="/assets/js/133.32c71b91.js"><link rel="prefetch" href="/assets/js/134.affa7fe9.js"><link rel="prefetch" href="/assets/js/135.06ff9d21.js"><link rel="prefetch" href="/assets/js/136.13323d46.js"><link rel="prefetch" href="/assets/js/137.5bb332e9.js"><link rel="prefetch" href="/assets/js/138.bad0911a.js"><link rel="prefetch" href="/assets/js/139.22b585b1.js"><link rel="prefetch" href="/assets/js/14.b0c75e60.js"><link rel="prefetch" href="/assets/js/140.30d9b40a.js"><link rel="prefetch" href="/assets/js/141.45b17106.js"><link rel="prefetch" href="/assets/js/142.9a98fd75.js"><link rel="prefetch" href="/assets/js/143.2aa20922.js"><link rel="prefetch" href="/assets/js/144.695d4acd.js"><link rel="prefetch" href="/assets/js/145.b2b2df24.js"><link rel="prefetch" href="/assets/js/146.b3c8c8db.js"><link rel="prefetch" href="/assets/js/147.6be833e8.js"><link rel="prefetch" href="/assets/js/148.9835db24.js"><link rel="prefetch" href="/assets/js/149.f9fc5086.js"><link rel="prefetch" href="/assets/js/15.feabe304.js"><link rel="prefetch" href="/assets/js/150.ec4d1cda.js"><link rel="prefetch" href="/assets/js/151.56de4c87.js"><link rel="prefetch" href="/assets/js/152.e9fa4bbf.js"><link rel="prefetch" href="/assets/js/153.b2a9188f.js"><link rel="prefetch" href="/assets/js/154.6da1de78.js"><link rel="prefetch" href="/assets/js/155.0361146d.js"><link rel="prefetch" href="/assets/js/16.a6767286.js"><link rel="prefetch" href="/assets/js/17.22c6ba9a.js"><link rel="prefetch" href="/assets/js/18.ef0cd39a.js"><link rel="prefetch" href="/assets/js/19.8899dfa5.js"><link rel="prefetch" href="/assets/js/2.ae6673a1.js"><link rel="prefetch" href="/assets/js/20.4c6f1994.js"><link rel="prefetch" href="/assets/js/21.26422e58.js"><link rel="prefetch" href="/assets/js/22.8afed43d.js"><link rel="prefetch" href="/assets/js/23.1a713867.js"><link rel="prefetch" href="/assets/js/24.0797cbc2.js"><link rel="prefetch" href="/assets/js/25.363cafd4.js"><link rel="prefetch" href="/assets/js/26.4c63cf94.js"><link rel="prefetch" href="/assets/js/27.5ddc91a4.js"><link rel="prefetch" href="/assets/js/28.1691ae01.js"><link rel="prefetch" href="/assets/js/29.b0550db7.js"><link rel="prefetch" href="/assets/js/30.6c54cab9.js"><link rel="prefetch" href="/assets/js/31.548c83d5.js"><link rel="prefetch" href="/assets/js/32.9cb080ba.js"><link rel="prefetch" href="/assets/js/33.c58d8b18.js"><link rel="prefetch" href="/assets/js/34.fc449b00.js"><link rel="prefetch" href="/assets/js/35.88763dbb.js"><link rel="prefetch" href="/assets/js/36.470f5da9.js"><link rel="prefetch" href="/assets/js/37.cfb818fb.js"><link rel="prefetch" href="/assets/js/38.02aa2797.js"><link rel="prefetch" href="/assets/js/39.d473d5bd.js"><link rel="prefetch" href="/assets/js/4.e0787ea2.js"><link rel="prefetch" href="/assets/js/40.c5f32118.js"><link rel="prefetch" href="/assets/js/41.1c48f55d.js"><link rel="prefetch" href="/assets/js/42.e1cad54b.js"><link rel="prefetch" href="/assets/js/43.f0ddfd79.js"><link rel="prefetch" href="/assets/js/44.b6739718.js"><link rel="prefetch" href="/assets/js/45.499d7119.js"><link rel="prefetch" href="/assets/js/46.719a84c3.js"><link rel="prefetch" href="/assets/js/47.43bfb159.js"><link rel="prefetch" href="/assets/js/48.1d57733c.js"><link rel="prefetch" href="/assets/js/49.217a24eb.js"><link rel="prefetch" href="/assets/js/5.57bdc345.js"><link rel="prefetch" href="/assets/js/50.d654b3f4.js"><link rel="prefetch" href="/assets/js/51.a67634e1.js"><link rel="prefetch" href="/assets/js/52.dadb4a39.js"><link rel="prefetch" href="/assets/js/53.c943b577.js"><link rel="prefetch" href="/assets/js/54.1f76b1fb.js"><link rel="prefetch" href="/assets/js/55.1adafb94.js"><link rel="prefetch" href="/assets/js/56.013a3ff7.js"><link rel="prefetch" href="/assets/js/57.d776ed64.js"><link rel="prefetch" href="/assets/js/58.92ad1eef.js"><link rel="prefetch" href="/assets/js/59.4a87bb2b.js"><link rel="prefetch" href="/assets/js/6.2c667b06.js"><link rel="prefetch" href="/assets/js/60.aa6ac53d.js"><link rel="prefetch" href="/assets/js/61.55b356a1.js"><link rel="prefetch" href="/assets/js/62.5bee3ccc.js"><link rel="prefetch" href="/assets/js/63.d9fe3bcf.js"><link rel="prefetch" href="/assets/js/64.a16d5b28.js"><link rel="prefetch" href="/assets/js/65.06d15671.js"><link rel="prefetch" href="/assets/js/66.00ec76c5.js"><link rel="prefetch" href="/assets/js/67.cf30dc53.js"><link rel="prefetch" href="/assets/js/68.8b981571.js"><link rel="prefetch" href="/assets/js/69.ac78ebab.js"><link rel="prefetch" href="/assets/js/7.818633d1.js"><link rel="prefetch" href="/assets/js/70.0cd461a4.js"><link rel="prefetch" href="/assets/js/72.a3ea13ac.js"><link rel="prefetch" href="/assets/js/73.0b7a21c0.js"><link rel="prefetch" href="/assets/js/74.cbbdc6d1.js"><link rel="prefetch" href="/assets/js/75.7e088dc7.js"><link rel="prefetch" href="/assets/js/76.647db7af.js"><link rel="prefetch" href="/assets/js/77.e19dce67.js"><link rel="prefetch" href="/assets/js/78.2435218a.js"><link rel="prefetch" href="/assets/js/79.2654ba52.js"><link rel="prefetch" href="/assets/js/8.4563f6fd.js"><link rel="prefetch" href="/assets/js/80.82f9eeda.js"><link rel="prefetch" href="/assets/js/81.9f574172.js"><link rel="prefetch" href="/assets/js/82.c462304c.js"><link rel="prefetch" href="/assets/js/83.e1a6a150.js"><link rel="prefetch" href="/assets/js/84.218e1c49.js"><link rel="prefetch" href="/assets/js/85.0ad7284d.js"><link rel="prefetch" href="/assets/js/86.7a304dea.js"><link rel="prefetch" href="/assets/js/87.2b138ab8.js"><link rel="prefetch" href="/assets/js/88.5877c2af.js"><link rel="prefetch" href="/assets/js/89.afabfc0a.js"><link rel="prefetch" href="/assets/js/9.13bca455.js"><link rel="prefetch" href="/assets/js/90.37e88d63.js"><link rel="prefetch" href="/assets/js/91.38382406.js"><link rel="prefetch" href="/assets/js/92.cebffc90.js"><link rel="prefetch" href="/assets/js/93.db10cebc.js"><link rel="prefetch" href="/assets/js/94.588db323.js"><link rel="prefetch" href="/assets/js/95.b7a4532f.js"><link rel="prefetch" href="/assets/js/96.c3829955.js"><link rel="prefetch" href="/assets/js/97.3a8e2bd4.js"><link rel="prefetch" href="/assets/js/98.c338c453.js"><link rel="prefetch" href="/assets/js/99.d9f57dca.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f46d1901.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">张晓伟-技术文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/engineering/" class="nav-link">
  吃透前端工程化
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">
  大前端
</a></div><div class="nav-item"><a href="/system/" class="nav-link">
  系统分析师
</a></div><div class="nav-item"><a href="/hand/" class="nav-link">
  源码系列
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  数据可视化
</a></div><div class="nav-item"><a href="/mode/" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/publish/" class="nav-link">
  前端发布脚手架
</a></div><div class="nav-item"><a href="/wy/" class="nav-link">
  wy高级前端
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人Menu" class="dropdown-title"><span class="title">个人</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人Menu" class="mobile-dropdown-title"><span class="title">个人</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://helloonetwo.github.io/xiao-ui-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/js-util-zhangxiaowei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人工具类
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/generator-zxw-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue脚手架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/zxw-pages" target="_blank" rel="noopener noreferrer" class="nav-link external">
  自动化构建工作流
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/engineering/" class="nav-link">
  吃透前端工程化
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">
  大前端
</a></div><div class="nav-item"><a href="/system/" class="nav-link">
  系统分析师
</a></div><div class="nav-item"><a href="/hand/" class="nav-link">
  源码系列
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  数据可视化
</a></div><div class="nav-item"><a href="/mode/" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/publish/" class="nav-link">
  前端发布脚手架
</a></div><div class="nav-item"><a href="/wy/" class="nav-link">
  wy高级前端
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人Menu" class="dropdown-title"><span class="title">个人</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人Menu" class="mobile-dropdown-title"><span class="title">个人</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://helloonetwo.github.io/xiao-ui-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/js-util-zhangxiaowei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人工具类
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/generator-zxw-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue脚手架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/package/zxw-pages" target="_blank" rel="noopener noreferrer" class="nav-link external">
  自动化构建工作流
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript 深度剖析</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/algorithm/" aria-current="page" class="sidebar-link">异步&amp;事件环</a></li><li><a href="/algorithm/ECMAScript.html" class="sidebar-link">ECMAScript</a></li><li><a href="/algorithm/手写 Promie.html" class="sidebar-link">手写 Promise</a></li><li><a href="/algorithm/JS 异步编程.html" class="sidebar-link">函数式编程</a></li><li><a href="/algorithm/Event Loop.html" class="sidebar-link">Event Loop 机制</a></li><li><a href="/algorithm/TypeScript.html" class="sidebar-link">Typescript</a></li><li><a href="/algorithm/javascript性能优化.html" class="active sidebar-link">javascript 性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#一、javascript-的垃圾" class="sidebar-link">一、javascript 的垃圾</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#二、gc-算法" class="sidebar-link">二、Gc 算法</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#三-、-常用的-gc-算法" class="sidebar-link">三 、 常用的 Gc 算法</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#四、-v8-引擎的垃圾回收" class="sidebar-link">四、 V8 引擎的垃圾回收</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#五、-performance-工具" class="sidebar-link">五、 Performance 工具</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#六、-堆栈执行" class="sidebar-link">六、 堆栈执行</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#七、-箭头函数" class="sidebar-link">七、 箭头函数</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#八、-展开数组参数" class="sidebar-link">八、 展开数组参数</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#九、-箭头函数与-this" class="sidebar-link">九、 箭头函数与 this</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#十、-对象字面量" class="sidebar-link">十、 对象字面量</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#十一、-object-assign-方法" class="sidebar-link">十一、 Object.assign 方法</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#十二、-object-is" class="sidebar-link">十二、 Object.is</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#十二、-object-is-2" class="sidebar-link">十二、 Object.is</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#十三、proxy-对象" class="sidebar-link">十三、Proxy 对象</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#十四、-reflect-对象" class="sidebar-link">十四、 Reflect 对象</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#十五、-class-关键词" class="sidebar-link">十五、 class 关键词</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#十六、-static-方法" class="sidebar-link">十六、 static 方法</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#十七、-extends-继承" class="sidebar-link">十七、 extends 继承</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#十八、-extends-继承" class="sidebar-link">十八、 extends 继承</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#十九、-set-数据结构" class="sidebar-link">十九、 Set 数据结构</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#二十、-map-数据结构" class="sidebar-link">二十、 Map 数据结构</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#二十一、-symbol-数据类型" class="sidebar-link">二十一、 Symbol 数据类型</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#二十二、-symbol-数据类型" class="sidebar-link">二十二、 Symbol 数据类型</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#二十三、-for-of-循环" class="sidebar-link">二十三、 for...of 循环</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#二十四、-迭代器" class="sidebar-link">二十四、 迭代器</a></li><li class="sidebar-sub-header"><a href="/algorithm/javascript性能优化.html#二十五、-generator-函数-生成器" class="sidebar-link">二十五、 Generator 函数 生成器</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>二周刷完前端面试题目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化实战</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue.js 框架源码与进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node 全栈开发</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="javascript-性能优化"><a href="#javascript-性能优化" class="header-anchor">#</a> javascript 性能优化</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>javascript 性能优化</p></div> <h2 id="一、javascript-的垃圾"><a href="#一、javascript-的垃圾" class="header-anchor">#</a> 一、javascript 的垃圾</h2> <blockquote><p>JavaScript 中内存管理的主要概念是可达性。</p></blockquote> <p>简单地说，“可达性” 值就是那些以某种方式可访问或可用的值，它们被保证存储在内存中。</p> <ol><li><p>有一组基本的固有可达值，由于显而易见的原因无法删除。例如:</p> <p>本地函数的局部变量和参数
当前嵌套调用链上的其他函数的变量和参数
全局变量
还有一些其他的，内部的
这些值称为根。</p></li> <li><p>如果引用或引用链可以从根访问任何其他值，则认为该值是可访问的。</p> <p>例如，如果局部变量中有对象，并且该对象具有引用另一个对象的属性，则该对象被视为可达性， 它引用的那些也是可以访问的，详细的例子如下。</p> <p>JavaScript 引擎中有一个后台进程称为垃圾回收器，它监视所有对象，并删除那些不可访问的对象。</p> <p>一个简单的例子
下面是最简单的例子:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// user 具有对象的引用</span>
<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果 user 的值被覆盖，则引用丢失:</p> <p>user = null;</p> <p>现在 John 变成不可达的状态，没有办法访问它，没有对它的引用。垃圾回收器将丢弃 John 数据并释放内存。</p></li></ol> <h2 id="二、gc-算法"><a href="#二、gc-算法" class="header-anchor">#</a> 二、Gc 算法</h2> <h3 id="gc-里的垃圾是什么"><a href="#gc-里的垃圾是什么" class="header-anchor">#</a> Gc 里的垃圾是什么</h3> <ul><li>程序中不再需要使用的对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> <span class="token string">&quot;lg&quot;</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is a coder</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>程序中不能再被访问到的对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;lg&quot;</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is a coder</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="gc-算法是什么"><a href="#gc-算法是什么" class="header-anchor">#</a> Gc 算法是什么</h4> <ul><li>Gc 是一种机制，垃圾回收器具体完成的工作</li> <li>工作的内容就是查找垃圾释放空间， 回收空间</li> <li>算法就是工作时查找和回收所遵循的规则</li></ul> <h2 id="三-、-常用的-gc-算法"><a href="#三-、-常用的-gc-算法" class="header-anchor">#</a> 三 、 常用的 Gc 算法</h2> <ul><li><p>引用计数:</p> <ul><li>当一个对象有一个指针指向它时,那么这个对象的引用就+1,当一个对象的引用为 0 时,这个对象就可以被销毁掉</li> <li>这个算法有一个很大的弊端就是会产生循环引用</li></ul></li></ul> <blockquote><p>算法思想：设置引用数，判断当前引用数是否为 0, 引用关系改变时修改引用数，引用数为 0 时回收</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//循环引用</span>
<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">friend</span><span class="token operator">:</span> obj2<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">friend</span><span class="token operator">:</span> obj1<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language- extra-class"><pre><code>优点：

发现垃圾时立即回收
能够最大限度的减少程序暂停

缺点：

无法回收循环引用的对象
</code></pre></div><ul><li><p>标记清除:</p> <ul><li>这个算法是设置一个根对象(root object),垃圾回收器会定期从这个根开始,找所有从根开始有引用到的对象,对于那些没有引用到的对象,就认为是不可用的对象</li> <li>这个算法可以很好的解决循环引用的问题</li></ul></li></ul> <blockquote><p>实现原理： 分为标记和清除两个部分，遍历所有对象找标记活动对象，遍历所有对象清除没有标记对象，回收对应空间</p></blockquote> <p><img src="/images/biaoji.png" alt=""></p> <div class="language- extra-class"><pre><code>优点：

相对以上，能够解决循环调用问题

缺点：

空间碎片化
不会立即回收
</code></pre></div><ul><li><p>标记整理</p> <blockquote><p>核心思想：标记整理可以看作是标记清除的增强版，标记阶段和上面一致，只是在清理阶段会先执行整理，移动对象位置再清除未标记的对象,</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>优点： 相对以上，能够解决空间碎片化的问题 不会立即回收垃圾对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>下面用图片来更好的 解释一下标记整理回收阶段的过程。</p> <p>回收之前我们内存摆放位置如下，有着很多活动对象、非活动对象和空闲的空间，当他去执行当前标记操作的时候，会把所有的活动对象进行标记，紧接着会去进行一个整理的操作。</p> <p><img src="/images/js1.jpg" alt=""></p> <p>整理会把我们的活动对象进行移动，在地址上变成连续的位置，紧接着将当前活动对象右侧的范围进行回收。</p> <p><img src="/images/js2.jpg" alt=""></p> <p>回收之后大概长下面的样子，现在回收到的空间基本上都是连续的，后续可以最大化利用内存释放出来的空间。它会配合着标记清除，在我们的V8引擎当中配合实现频繁的GC操作。</p> <p><img src="/images/js3.jpg" alt=""></p></li></ul> <h2 id="四、-v8-引擎的垃圾回收"><a href="#四、-v8-引擎的垃圾回收" class="header-anchor">#</a> 四、 V8 引擎的垃圾回收</h2> <p>认识V8</p> <ul><li>V8 是一款主流的 JavaScript 执行引擎</li> <li>V8 采用即时编译，速度很快</li> <li>V8 内存设限，64位操作系统最大1.5G，32位操作系统最大800M</li></ul> <p>V8 垃圾回收策略</p> <ul><li>采用分代回收的思想</li> <li>内存分为新生代、老生代</li> <li>针对不同对象采用不同算法</li></ul> <p><img src="/images/js4.png" alt=""></p> <p>V8 中常用的 GC(Garbage Collection) 算法</p> <blockquote><p>分代回收、空间复制、标记清除、标记整理、标记增量</p></blockquote> <p>V8 内存分配</p> <p><img src="/images/js5.png" alt=""></p> <blockquote><p>如上图所示，V8内存空间一分为二，左侧白色背景部分用于存放新生代对象  新生代指的是存活时间较短的对象</p></blockquote> <ul><li>V8 内存空间一分为二</li> <li>小空间用于存储新生代对象（64位操作系统：32M，32位操作系统：16M）</li> <li>新生代指的是存活时间较短的对象</li></ul> <p>新生代对象回收实现</p> <ul><li>回收过程采用复制算法 + 标记整理</li> <li>新生代内存区分为两个等大小空间 From 和 To</li> <li>使用空间为 From，空闲空间为 To</li> <li>活动对象存储在 From 空间，标记整理后将活动对象拷贝至 To</li> <li>From 与 To 交换空间之后完成内存释放</li></ul> <p>回收细节说明</p> <ul><li>拷贝过程中可能出现晋升</li> <li>晋升就是将新生代对象移动至老生代</li> <li>一轮 GC 还存活的新生代需要晋升</li> <li>To 空间的使用率超过 25%，也要将活动对象移动至老生代</li></ul> <p>老生代对象说明</p> <ul><li>老生代对象存放在右侧的老生代区域</li> <li>64位操作系统 1.4G，32位操作系统 700M</li> <li>老生代对象就是指存活时间较长的对象</li></ul> <p>老生代对象回收实现</p> <ul><li>主要采用标记清除、标记整理、增量标记算法</li> <li>首先使用标记清除完成垃圾空间的回收</li> <li>采用标记整理进行空间优化</li> <li>采用增量标记进行效率优化</li></ul> <p>细节对比</p> <ul><li>新生代区域垃圾回收使用空间换时间，会浪费一部分空间</li> <li>老生代区域垃圾回收不适合复制算法(因为老生代区域比较大，一分为二浪费比较大，复制算法比较浪费时间)</li></ul> <p>增量标记优化垃圾回收 程序执行与垃圾回收交替执行</p> <p><img src="/images/js6.png" alt=""></p> <p>V8 总结</p> <ul><li>V8 是一款主流的 JavaScript 执行引擎</li> <li>V8 内存设置上限（从web应用、用户体验考虑）</li> <li>V8 采用基于分代回收思想实现垃圾回收</li> <li>V8 内存分为新生代和老生代</li> <li>V8 垃圾回收常见的 GC 算法</li></ul> <h2 id="五、-performance-工具"><a href="#五、-performance-工具" class="header-anchor">#</a> 五、 Performance 工具</h2> <ul><li><p>为什么使用 Performance</p> <ul><li>GC 的目的是为了实现内存空间的良性循环</li> <li>良性循环的基石是合理使用</li> <li>时刻关注才能确定是否合理</li> <li>Performance 提供多种监控方式</li></ul></li> <li><p>Performance 使用步骤</p> <ul><li>打开浏览器输入目标网址</li> <li>进入开发人员工具面板，选择性能</li> <li>开启录制功能，访问具体界面</li> <li>执行用户行为，一段时间后停止录制</li> <li>分析界面中记录的内存信息</li></ul></li> <li><p>内存问题的外在表现</p> <ul><li>页面出现延迟加载或经常性暂停</li> <li>页面持续性出现糟糕的性能</li> <li>页面的性能随时间延长越来越差</li></ul></li> <li><p>界定内存问题的标准</p> <ul><li>内存泄漏：内存使用持续升高</li> <li>内存膨胀：在多数设备上都存在性能问题</li> <li>频繁垃圾回收：通过内存变化图进行分析</li></ul></li> <li><p>监控内存的几种方式</p> <ul><li>浏览器任务管理器</li> <li>Timeline 时序图记录</li> <li>堆快照查找分离 DOM</li> <li>判断是否存在频繁的垃圾回收</li></ul></li> <li><p>如何确定存在频繁的垃圾回收？</p> <ul><li>Timeline 中频繁的上升下降</li> <li>任务管理器中数据频繁的增加减小</li></ul></li></ul> <h2 id="六、-堆栈执行"><a href="#六、-堆栈执行" class="header-anchor">#</a> 六、 堆栈执行</h2> <h3 id="堆栈的一些概念"><a href="#堆栈的一些概念" class="header-anchor">#</a> 堆栈的一些概念</h3> <ul><li>JS执行环境（V8引擎等）</li> <li>执行环境栈（ECStack，execution context stack），浏览器渲染界面时在内存中开辟的一块空间</li> <li>执行上下文，管理不用的区域，每个执行上下文中的代码需要执行时，进栈执行，栈底永远都有一个全局的执行上下文EC(G)</li> <li>VO(G)，全局变量对象</li> <li>无论是栈内存还是引用类型数据的堆内存，都是属于计算机内存</li></ul> <h3 id="堆栈对基本数据类型处理"><a href="#堆栈对基本数据类型处理" class="header-anchor">#</a> 堆栈对基本数据类型处理</h3> <ul><li>基本数据类型是按值进行操作</li> <li>基本数据类型值是存放在栈区的，不会分配16进制的内存地址，也没有开辟内存空间</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1、创建一个值100，由于100是一个基本数据类型，所以会直接存放在栈区</span>
<span class="token comment">// 2、声明一个变量x，存放在VO(G)</span>
<span class="token comment">// 3、建立变量与值之间的联系 x = 100</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">100</span>

<span class="token comment">// 1、声明一个变量y，存放在VO(G)</span>
<span class="token comment">// 2、建立变量与值之间的联系 y = x = 100</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> x

<span class="token comment">// 1、创建一个值200，由于200是一个基本数据类型，所以会直接存放在栈区</span>
<span class="token comment">// 2、断掉y和100的联系</span>
<span class="token comment">// 2、建立变量与值之间的联系 y = 200</span>
y <span class="token operator">=</span> <span class="token number">200</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="堆栈对引用类型数据处理"><a href="#堆栈对引用类型数据处理" class="header-anchor">#</a> 堆栈对引用类型数据处理</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1、声明一个变量obj5，存放在VO(G)</span>
<span class="token comment">// 2、创建一个堆内存heap 0x000，存放对象键值对形式数据，x: 100</span>
<span class="token comment">// 3、栈区的obj5指向堆内存地址0x000</span>
<span class="token keyword">var</span> obj5 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span>

<span class="token comment">// 栈区的obj6指向obj5同样的堆内存地址0x000</span>
<span class="token keyword">var</span> obj6 <span class="token operator">=</span> obj5

<span class="token comment">// 1、obj5.y由于优先运算，在0x000中创建一个y，这个y将来会指向接下来将会创建的内存地址</span>
<span class="token comment">// 2、obj5 = { x: 200 }，此时obj5创建并指向一个堆内存heap 0x001，存放对象键值对形式数据，x: 200</span>
<span class="token comment">// 3、此时heap 0x000内存内新增了y指向0x001内存内数据{ x: 200 }</span>
obj5<span class="token punctuation">.</span>y <span class="token operator">=</span> obj5 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span>

<span class="token comment">// 此时obj5内只有x，没有y，输出undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj5<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
<span class="token comment">// 此时obj6地址还是0x000，输出{ x: 200 }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj6<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="堆栈对函数类型处理"><a href="#堆栈对函数类型处理" class="header-anchor">#</a> 堆栈对函数类型处理</h3> <h4 id="函数的创建"><a href="#函数的创建" class="header-anchor">#</a> 函数的创建</h4> <ul><li>可以将函数名称看作是变量，存放在VO中，同时它的值就是当前函数对应的内存地址</li> <li>函数本身也是一个对象，创建时会有一个内存地址，空间内存放的就是字符串形式函数体代码</li></ul> <h4 id="函数执行时会形成一个全新私有上下文-它里面有一个ao-全局执行环境里面叫vo-用于管理这个上下文当中的变量-具体步骤如下"><a href="#函数执行时会形成一个全新私有上下文-它里面有一个ao-全局执行环境里面叫vo-用于管理这个上下文当中的变量-具体步骤如下" class="header-anchor">#</a> 函数执行时会形成一个全新私有上下文，它里面有一个AO（全局执行环境里面叫VO），用于管理这个上下文当中的变量，具体步骤如下</h4> <ul><li>确定作用域链&lt;当前执行上下文，上级作用域所在的执行上下文&gt;</li> <li>确定this</li> <li>初始化arguments（对象）</li> <li>形参赋值：它就相当于是变量声明，然后将声明的变量放置于AO</li> <li>变量提升</li> <li>代码执行</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1、声明一个变量arr，存放在VO(G)</span>
<span class="token comment">// 2、创建一个堆内存heap 0x001，存放对象键值对形式数据，0: zce，1: tom</span>
<span class="token comment">// 3、栈区的arr指向堆内存地址0x001</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'zce'</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">]</span>

<span class="token comment">// 1、创建函数和创建变量类型，函数名此时就可以看做是一个变量</span>
<span class="token comment">// 2、单独开辟一个堆内存用于存放函数体（字符串形式代码），当前内存地址也会有一个16进制数值地址0x000（函数创建优先）</span>
<span class="token comment">// 3、创建函数的时候，它的作用域[[scope]]就已经确定了（创建函数时所在的执行上下文），此例为EC(G)全局执行上下文</span>
<span class="token comment">// 4、创建函数之后会将它的内存地址存放在栈区与对应的函数名进行关联</span>
<span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">// 函数参数obj指向0x001的地址，修改0x001地址上0: zoe</span>
 obj<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'zoe'</span>
 <span class="token comment">// 重新创建一个堆地址0x002，0: javascript，obj指向0x002</span>
 obj <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'javascript'</span><span class="token punctuation">]</span>
 <span class="token comment">// 0x002地址下新增1: typescript</span>
 obj<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'typescript'</span>
 <span class="token comment">// 打印0x002地址数据 ['javascript', 'typescript']</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 函数执行，目的就是为了将函数对应的堆内存里的字符串形式代码进行执行。代码在执行的时候肯定需要一个环境，此时就意味着函数在执行的时候会生成一个新的执行上下文EC(foo)来管理函数体当中的代码</span>
<span class="token comment">// 执行函数相当于找到foo的内存地址0x000，然后吧参数的内存地址0x001传入，执行0x000(0x001)</span>
<span class="token function">foo</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// 执行完成后，没有其他引用关系，出栈</span>

<span class="token comment">// 打印0x001地址数据 [‘zoe’, 'tom']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="堆栈对闭包类型处理"><a href="#堆栈对闭包类型处理" class="header-anchor">#</a> 堆栈对闭包类型处理</h3> <ul><li>闭包是一种机制，通过私有上下文来保护当中变量的机制</li> <li>我们也可以认为当我们创建的某一个执行上下文不被释放的时候就形成来闭包</li> <li>保护：使当前上下文中的数据和其他上下文中的数据互不干扰，保存数据：当前上下文的数据（堆内存）被当前上下文以外的上下文中的变量所引用，这个数据就保存下来</li> <li>函数调用形成来一个全新的私有上下文，在函数调用之后当前上下文不被释放或临时不被释放就是闭包</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 全局执行上下文中的VO中声明a = 1</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">// 为函数foo创立一个堆地址0x000，全局执行上下文中的VO中声明foo指向0x000，确定作用域为EC(G)</span>
<span class="token comment">// foo函数执行时，会创立一个EC(FOO)的执行上下文，并在其中的AO中声明变量b=2</span>
<span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">2</span>
  <span class="token comment">// 函数执行完时返回了一个函数。此时创建一个新的存放此匿名函数的堆地址0x001</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c <span class="token operator">+</span> b<span class="token operator">++</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 当前ec(foo)执行上下文当中引用的一个堆地址0x001被ec(g)中的变量f引用，因此foo()调用时所创建的执行上下文不鞥被释放，此时就形成了闭包</span>
<span class="token comment">// foo函数执行完毕返回了0x001地址的函数，所以f指向0x001</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// f函数执行时创建新的执行上下文ec(f)，并在其AO中声明参数c=5，在上级作用域中找到b，打印5+2=7，b自增为3</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

<span class="token comment">// 函数每调用一次会产生一个全新的上下文，此时函数执行产生新的执行上下文ec(f)，并在其AO中声明参数c=10，在上级作用域中找到b，打印10+3=13，b自增为4</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="七、-箭头函数"><a href="#七、-箭头函数" class="header-anchor">#</a> 七、 箭头函数</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 箭头函数</span>

<span class="token comment">// function inc (number) {</span>
<span class="token comment">//   return number + 1</span>
<span class="token comment">// }</span>

<span class="token comment">// 最简方式</span>
<span class="token comment">// const inc = n =&gt; n + 1</span>

<span class="token comment">// 完整参数列表，函数体多条语句，返回值仍需 return</span>
<span class="token keyword">const</span> <span class="token function-variable function">inc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> m</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;inc invoked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// arr.filter(function (item) {</span>
<span class="token comment">//   return item % 2</span>
<span class="token comment">// })</span>

<span class="token comment">// 常用场景，回调函数</span>
arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="八、-展开数组参数"><a href="#八、-展开数组参数" class="header-anchor">#</a> 八、 展开数组参数</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 展开数组参数</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;baz&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// console.log(</span>
<span class="token comment">//   arr[0],</span>
<span class="token comment">//   arr[1],</span>
<span class="token comment">//   arr[2],</span>
<span class="token comment">// )</span>

<span class="token comment">// console.log.apply(console, arr)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="九、-箭头函数与-this"><a href="#九、-箭头函数与-this" class="header-anchor">#</a> 九、 箭头函数与 this</h2> <ul><li>箭头函数不会改变 this 指向</li> <li>箭头函数没有 this 机制</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 箭头函数与 this</span>
<span class="token comment">// 箭头函数不会改变 this 指向</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// sayHi: function () {</span>
  <span class="token comment">//   console.log(`hi, my name is ${this.name}`)</span>
  <span class="token comment">// }</span>
  <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hi, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayHiAsync</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// const _this = this</span>
    <span class="token comment">// setTimeout(function () {</span>
    <span class="token comment">//   console.log(_this.name)</span>
    <span class="token comment">// }, 1000)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// console.log(this.name)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

person<span class="token punctuation">.</span><span class="token function">sayHiAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="十、-对象字面量"><a href="#十、-对象字面量" class="header-anchor">#</a> 十、 对象字面量</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 对象字面量</span>

<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token string">&quot;345&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token comment">// bar: bar</span>
  <span class="token comment">// 属性名与变量名相同，可以省略 : bar</span>
  bar<span class="token punctuation">,</span>
  <span class="token comment">// method1: function () {</span>
  <span class="token comment">//   console.log('method111')</span>
  <span class="token comment">// }</span>
  <span class="token comment">// 方法可以省略 : function</span>
  <span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;method111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 这种方法就是普通的函数，同样影响 this 指向。</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// Math.random(): 123 // 不允许</span>
  <span class="token comment">// 通过 [] 让表达式的结果作为属性名</span>
  <span class="token punctuation">[</span>bar<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// obj[Math.random()] = 123</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="十一、-object-assign-方法"><a href="#十一、-object-assign-方法" class="header-anchor">#</a> 十一、 Object.assign 方法</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Object.assign 方法</span>

<span class="token keyword">const</span> source1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> source2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">789</span><span class="token punctuation">,</span>
  <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token number">789</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">456</span><span class="token punctuation">,</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">456</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source1<span class="token punctuation">,</span> source2<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// console.log(result === target)</span>

<span class="token comment">// 应用场景</span>

<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// obj.name = 'func obj'</span>
  <span class="token comment">// console.log(obj)</span>

  <span class="token keyword">const</span> funcObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  funcObj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;func obj&quot;</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>funcObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;global obj&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">func</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="十二、-object-is"><a href="#十二、-object-is" class="header-anchor">#</a> 十二、 Object.is</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Object.is</span>

console
  <span class="token punctuation">.</span>log
  <span class="token comment">// 0 == false              // =&gt; true</span>
  <span class="token comment">// 0 === false             // =&gt; false</span>
  <span class="token comment">// +0 === -0               // =&gt; true</span>
  <span class="token comment">// NaN === NaN             // =&gt; false</span>
  <span class="token comment">// Object.is(+0, -0)       // =&gt; false</span>
  <span class="token comment">// Object.is(NaN, NaN)     // =&gt; true</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="十二、-object-is-2"><a href="#十二、-object-is-2" class="header-anchor">#</a> 十二、 Object.is</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Object.is</span>

console
  <span class="token punctuation">.</span>log
  <span class="token comment">// 0 == false              // =&gt; true</span>
  <span class="token comment">// 0 === false             // =&gt; false</span>
  <span class="token comment">// +0 === -0               // =&gt; true</span>
  <span class="token comment">// NaN === NaN             // =&gt; false</span>
  <span class="token comment">// Object.is(+0, -0)       // =&gt; false</span>
  <span class="token comment">// Object.is(NaN, NaN)     // =&gt; true</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="十三、proxy-对象"><a href="#十三、proxy-对象" class="header-anchor">#</a> 十三、Proxy 对象</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Proxy 对象</span>

<span class="token comment">// const person = {</span>
<span class="token comment">//   name: 'zce',</span>
<span class="token comment">//   age: 20</span>
<span class="token comment">// }</span>

<span class="token comment">// const personProxy = new Proxy(person, {</span>
<span class="token comment">//   // 监视属性读取</span>
<span class="token comment">//   get (target, property) {</span>
<span class="token comment">//     return property in target ? target[property] : 'default'</span>
<span class="token comment">//     // console.log(target, property)</span>
<span class="token comment">//     // return 100</span>
<span class="token comment">//   },</span>
<span class="token comment">//   // 监视属性设置</span>
<span class="token comment">//   set (target, property, value) {</span>
<span class="token comment">//     if (property === 'age') {</span>
<span class="token comment">//       if (!Number.isInteger(value)) {</span>
<span class="token comment">//         throw new TypeError(`${value} is not an int`)</span>
<span class="token comment">//       }</span>
<span class="token comment">//     }</span>

<span class="token comment">//     target[property] = value</span>
<span class="token comment">//     // console.log(target, property, value)</span>
<span class="token comment">//   }</span>
<span class="token comment">// })</span>

<span class="token comment">// personProxy.age = 100</span>

<span class="token comment">// personProxy.gender = true</span>

<span class="token comment">// console.log(personProxy.name)</span>
<span class="token comment">// console.log(personProxy.xxx)</span>

<span class="token comment">// Proxy 对比 Object.defineProperty() ===============</span>

<span class="token comment">// 优势1：Proxy 可以监视读写以外的操作 --------------------------</span>

<span class="token comment">// const person = {</span>
<span class="token comment">//   name: 'zce',</span>
<span class="token comment">//   age: 20</span>
<span class="token comment">// }</span>

<span class="token comment">// const personProxy = new Proxy(person, {</span>
<span class="token comment">//   deleteProperty (target, property) {</span>
<span class="token comment">//     console.log('delete', property)</span>
<span class="token comment">//     delete target[property]</span>
<span class="token comment">//   }</span>
<span class="token comment">// })</span>

<span class="token comment">// delete personProxy.age</span>
<span class="token comment">// console.log(person)</span>

<span class="token comment">// 优势2：Proxy 可以很方便的监视数组操作 --------------------------</span>

<span class="token comment">// const list = []</span>

<span class="token comment">// const listProxy = new Proxy(list, {</span>
<span class="token comment">//   set (target, property, value) {</span>
<span class="token comment">//     console.log('set', property, value)</span>
<span class="token comment">//     target[property] = value</span>
<span class="token comment">//     return true // 表示设置成功</span>
<span class="token comment">//   }</span>
<span class="token comment">// })</span>

<span class="token comment">// listProxy.push(100)</span>
<span class="token comment">// listProxy.push(100)</span>

<span class="token comment">// 优势3：Proxy 不需要侵入对象 --------------------------</span>

<span class="token comment">// const person = {}</span>

<span class="token comment">// Object.defineProperty(person, 'name', {</span>
<span class="token comment">//   get () {</span>
<span class="token comment">//     console.log('name 被访问')</span>
<span class="token comment">//     return person._name</span>
<span class="token comment">//   },</span>
<span class="token comment">//   set (value) {</span>
<span class="token comment">//     console.log('name 被设置')</span>
<span class="token comment">//     person._name = value</span>
<span class="token comment">//   }</span>
<span class="token comment">// })</span>
<span class="token comment">// Object.defineProperty(person, 'age', {</span>
<span class="token comment">//   get () {</span>
<span class="token comment">//     console.log('age 被访问')</span>
<span class="token comment">//     return person._age</span>
<span class="token comment">//   },</span>
<span class="token comment">//   set (value) {</span>
<span class="token comment">//     console.log('age 被设置')</span>
<span class="token comment">//     person._age = value</span>
<span class="token comment">//   }</span>
<span class="token comment">// })</span>

<span class="token comment">// person.name = 'jack'</span>

<span class="token comment">// console.log(person.name)</span>

<span class="token comment">// Proxy 方式更为合理</span>
<span class="token keyword">const</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;zce&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> personProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>person2<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> property<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> target<span class="token punctuation">[</span>property<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> property<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    target<span class="token punctuation">[</span>property<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

personProxy<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>personProxy<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br></div></div><h2 id="十四、-reflect-对象"><a href="#十四、-reflect-对象" class="header-anchor">#</a> 十四、 Reflect 对象</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Reflect 对象</span>

<span class="token comment">// const obj = {</span>
<span class="token comment">//   foo: '123',</span>
<span class="token comment">//   bar: '456'</span>
<span class="token comment">// }</span>

<span class="token comment">// const proxy = new Proxy(obj, {</span>
<span class="token comment">//   get (target, property) {</span>
<span class="token comment">//     console.log('watch logic~')</span>

<span class="token comment">//     return Reflect.get(target, property)</span>
<span class="token comment">//   }</span>
<span class="token comment">// })</span>

<span class="token comment">// console.log(proxy.foo)</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;zce&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// console.log('name' in obj)</span>
<span class="token comment">// console.log(delete obj['age'])</span>
<span class="token comment">// console.log(Object.keys(obj))</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="十五、-class-关键词"><a href="#十五、-class-关键词" class="header-anchor">#</a> 十五、 class 关键词</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// class 关键词</span>

<span class="token comment">// function Person (name) {</span>
<span class="token comment">//   this.name = name</span>
<span class="token comment">// }</span>

<span class="token comment">// Person.prototype.say = function () {</span>
<span class="token comment">//   console.log(`hi, my name is ${this.name}`)</span>
<span class="token comment">// }</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hi, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="十六、-static-方法"><a href="#十六、-static-方法" class="header-anchor">#</a> 十六、 static 方法</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// static 方法</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hi, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> tom <span class="token operator">=</span> Person<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tom<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="十七、-extends-继承"><a href="#十七、-extends-继承" class="header-anchor">#</a> 十七、 extends 继承</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// extends 继承</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hi, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 父类构造函数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">=</span> number<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类成员</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">my school number is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>number<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="十八、-extends-继承"><a href="#十八、-extends-继承" class="header-anchor">#</a> 十八、 extends 继承</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// extends 继承</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hi, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 父类构造函数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">=</span> number<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类成员</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">my school number is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>number<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="十九、-set-数据结构"><a href="#十九、-set-数据结构" class="header-anchor">#</a> 十九、 Set 数据结构</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Set 数据结构</span>

<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// console.log(s)</span>

<span class="token comment">// s.forEach(i =&gt; console.log(i))</span>

<span class="token comment">// for (let i of s) {</span>
<span class="token comment">//   console.log(i)</span>
<span class="token comment">// }</span>

<span class="token comment">// console.log(s.size)</span>

<span class="token comment">// console.log(s.has(100))</span>

<span class="token comment">// console.log(s.delete(3))</span>
<span class="token comment">// console.log(s)</span>

<span class="token comment">// s.clear()</span>
<span class="token comment">// console.log(s)</span>

<span class="token comment">// 应用场景：数组去重</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// const result = Array.from(new Set(arr))</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 弱引用版本 WeakSet</span>
<span class="token comment">// 差异就是 Set 中会对所使用到的数据产生引用</span>
<span class="token comment">// 即便这个数据在外面被消耗，但是由于 Set 引用了这个数据，所以依然不会回收</span>
<span class="token comment">// 而 WeakSet 的特点就是不会产生引用，</span>
<span class="token comment">// 一旦数据销毁，就可以被回收，所以不会产生内存泄漏问题。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h2 id="二十、-map-数据结构"><a href="#二十、-map-数据结构" class="header-anchor">#</a> 二十、 Map 数据结构</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Map 数据结构</span>

<span class="token comment">// const obj = {}</span>
<span class="token comment">// obj[true] = 'value'</span>
<span class="token comment">// obj[123] = 'value'</span>
<span class="token comment">// obj[{ a: 1 }] = 'value'</span>

<span class="token comment">// console.log(Object.keys(obj))</span>
<span class="token comment">// console.log(obj['[object Object]'])</span>

<span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> tom <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;tom&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>tom<span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>tom<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// m.has()</span>
<span class="token comment">// m.delete()</span>
<span class="token comment">// m.clear()</span>

m<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 弱引用版本 WeakMap</span>
<span class="token comment">// 差异就是 Map 中会对所使用到的数据产生引用</span>
<span class="token comment">// 即便这个数据在外面被消耗，但是由于 Map 引用了这个数据，所以依然不会回收</span>
<span class="token comment">// 而 WeakMap 的特点就是不会产生引用，</span>
<span class="token comment">// 一旦数据销毁，就可以被回收，所以不会产生内存泄漏问题。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="二十一、-symbol-数据类型"><a href="#二十一、-symbol-数据类型" class="header-anchor">#</a> 二十一、 Symbol 数据类型</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Symbol 数据类型</span>

<span class="token comment">// 场景1：扩展对象，属性名冲突问题</span>

<span class="token comment">// // shared.js ====================================</span>

<span class="token comment">// const cache = {}</span>

<span class="token comment">// // a.js =========================================</span>

<span class="token comment">// cache['a_foo'] = Math.random()</span>

<span class="token comment">// // b.js =========================================</span>

<span class="token comment">// cache['b_foo'] = '123'</span>

<span class="token comment">// console.log(cache)</span>

<span class="token comment">// =========================================================</span>

<span class="token comment">// const s = Symbol()</span>
<span class="token comment">// console.log(s)</span>
<span class="token comment">// console.log(typeof s)</span>

<span class="token comment">// 两个 Symbol 永远不会相等</span>

<span class="token comment">// console.log(</span>
<span class="token comment">//   Symbol() === Symbol()</span>
<span class="token comment">// )</span>

<span class="token comment">// Symbol 描述文本</span>

<span class="token comment">// console.log(Symbol('foo'))</span>
<span class="token comment">// console.log(Symbol('bar'))</span>
<span class="token comment">// console.log(Symbol('baz'))</span>

<span class="token comment">// 使用 Symbol 为对象添加用不重复的键</span>

<span class="token comment">// const obj = {}</span>
<span class="token comment">// obj[Symbol()] = '123'</span>
<span class="token comment">// obj[Symbol()] = '456'</span>
<span class="token comment">// console.log(obj)</span>

<span class="token comment">// 也可以在计算属性名中使用</span>

<span class="token comment">// const obj = {</span>
<span class="token comment">//   [Symbol()]: 123</span>
<span class="token comment">// }</span>
<span class="token comment">// console.log(obj)</span>

<span class="token comment">// =========================================================</span>

<span class="token comment">// 案例2：Symbol 模拟实现私有成员</span>

<span class="token comment">// a.js ======================================</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&quot;zce&quot;</span><span class="token punctuation">,</span>
  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 只对外暴露 person</span>

<span class="token comment">// b.js =======================================</span>

<span class="token comment">// 由于无法创建出一样的 Symbol 值，</span>
<span class="token comment">// 所以无法直接访问到 person 中的「私有」成员</span>
<span class="token comment">// person[Symbol()]</span>
person<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h2 id="二十二、-symbol-数据类型"><a href="#二十二、-symbol-数据类型" class="header-anchor">#</a> 二十二、 Symbol 数据类型</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Symbol 数据类型</span>

<span class="token comment">// 场景1：扩展对象，属性名冲突问题</span>

<span class="token comment">// // shared.js ====================================</span>

<span class="token comment">// const cache = {}</span>

<span class="token comment">// // a.js =========================================</span>

<span class="token comment">// cache['a_foo'] = Math.random()</span>

<span class="token comment">// // b.js =========================================</span>

<span class="token comment">// cache['b_foo'] = '123'</span>

<span class="token comment">// console.log(cache)</span>

<span class="token comment">// =========================================================</span>

<span class="token comment">// const s = Symbol()</span>
<span class="token comment">// console.log(s)</span>
<span class="token comment">// console.log(typeof s)</span>

<span class="token comment">// 两个 Symbol 永远不会相等</span>

<span class="token comment">// console.log(</span>
<span class="token comment">//   Symbol() === Symbol()</span>
<span class="token comment">// )</span>

<span class="token comment">// Symbol 描述文本</span>

<span class="token comment">// console.log(Symbol('foo'))</span>
<span class="token comment">// console.log(Symbol('bar'))</span>
<span class="token comment">// console.log(Symbol('baz'))</span>

<span class="token comment">// 使用 Symbol 为对象添加用不重复的键</span>

<span class="token comment">// const obj = {}</span>
<span class="token comment">// obj[Symbol()] = '123'</span>
<span class="token comment">// obj[Symbol()] = '456'</span>
<span class="token comment">// console.log(obj)</span>

<span class="token comment">// 也可以在计算属性名中使用</span>

<span class="token comment">// const obj = {</span>
<span class="token comment">//   [Symbol()]: 123</span>
<span class="token comment">// }</span>
<span class="token comment">// console.log(obj)</span>

<span class="token comment">// =========================================================</span>

<span class="token comment">// 案例2：Symbol 模拟实现私有成员</span>

<span class="token comment">// a.js ======================================</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&quot;zce&quot;</span><span class="token punctuation">,</span>
  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 只对外暴露 person</span>

<span class="token comment">// b.js =======================================</span>

<span class="token comment">// 由于无法创建出一样的 Symbol 值，</span>
<span class="token comment">// 所以无法直接访问到 person 中的「私有」成员</span>
<span class="token comment">// person[Symbol()]</span>
person<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h2 id="二十三、-for-of-循环"><a href="#二十三、-for-of-循环" class="header-anchor">#</a> 二十三、 for...of 循环</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// for...of 循环</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// for (const item of arr) {</span>
<span class="token comment">//   console.log(item)</span>
<span class="token comment">// }</span>

<span class="token comment">// for...of 循环可以替代 数组对象的 forEach 方法</span>

<span class="token comment">// arr.forEach(item =&gt; {</span>
<span class="token comment">//   console.log(item)</span>
<span class="token comment">// })</span>

<span class="token comment">// for (const item of arr) {</span>
<span class="token comment">//   console.log(item)</span>
<span class="token comment">//   if (item &gt; 100) {</span>
<span class="token comment">//     break</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>

<span class="token comment">// forEach 无法跳出循环，必须使用 some 或者 every 方法</span>

<span class="token comment">// arr.forEach() // 不能跳出循环</span>
<span class="token comment">// arr.some()</span>
<span class="token comment">// arr.every()</span>

<span class="token comment">// 遍历 Set 与遍历数组相同</span>

<span class="token comment">// const s = new Set(['foo', 'bar'])</span>

<span class="token comment">// for (const item of s) {</span>
<span class="token comment">//   console.log(item)</span>
<span class="token comment">// }</span>

<span class="token comment">// 遍历 Map 可以配合数组结构语法，直接获取键值</span>

<span class="token comment">// const m = new Map()</span>
<span class="token comment">// m.set('foo', '123')</span>
<span class="token comment">// m.set('bar', '345')</span>

<span class="token comment">// for (const [key, value] of m) {</span>
<span class="token comment">//   console.log(key, value)</span>
<span class="token comment">// }</span>

<span class="token comment">// 普通对象不能被直接 for...of 遍历</span>

<span class="token comment">// const obj = { foo: 123, bar: 456 }</span>

<span class="token comment">// for (const item of obj) {</span>
<span class="token comment">//   console.log(item)</span>
<span class="token comment">// }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h2 id="二十四、-迭代器"><a href="#二十四、-迭代器" class="header-anchor">#</a> 二十四、 迭代器</h2> <h4 id="维护一个数据指针-返回一个带有-next-的方法"><a href="#维护一个数据指针-返回一个带有-next-的方法" class="header-anchor">#</a> 维护一个数据指针 返回一个带有 next 的方法</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;baz&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> iterator <span class="token operator">=</span> <span class="token keyword">set</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// console.log(iterator.next())</span>
<span class="token comment">// console.log(iterator.next())</span>
<span class="token comment">// console.log(iterator.next())</span>
<span class="token comment">// console.log(iterator.next())</span>
<span class="token comment">// console.log(iterator.next())</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> current <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// 迭代已经结束了，没必要继续了</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="二十五、-generator-函数-生成器"><a href="#二十五、-generator-函数-生成器" class="header-anchor">#</a> 二十五、 Generator 函数 生成器</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Generator 函数</span>

<span class="token comment">// function * foo () {</span>
<span class="token comment">//   console.log('zce')</span>
<span class="token comment">//   return 100</span>
<span class="token comment">// }</span>

<span class="token comment">// const result = foo()</span>
<span class="token comment">// console.log(result.next())</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">100</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;2222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">200</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;3333&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> generator <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第一次调用，函数体开始执行，遇到第一个 yield 暂停</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第二次调用，从暂停位置继续，直到遇到下一个 yield 再次暂停</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 。。。</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第四次调用，已经没有需要执行的内容了，所以直接得到 undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/12/2022, 4:59:21 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/algorithm/TypeScript.html" class="prev">
        Typescript
      </a></span> <span class="next"><a href="/algorithm/实际工作经验.html">
        实际工作经验
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><canvas id="vuepress-canvas-cursor"></canvas><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 张晓伟-技术文档
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="https://assets.smallsunnyfox.com/music/2.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:10px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="https://assets.smallsunnyfox.com/music/2.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(https://assets.smallsunnyfox.com/music/2.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>강남역 4번 출구</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>Plastic / Fallin` Dild</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/assets/js/app.ac5ad06d.js" defer></script><script src="/assets/js/3.c24abbc0.js" defer></script><script src="/assets/js/71.26b88a69.js" defer></script>
  </body>
</html>
